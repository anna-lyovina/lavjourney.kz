<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Анна Лёвина</title>
  <meta name="description" content="Психологическая помощь онлайн – Анна Лёвина, КПТ, кризисная терапия.">
  <meta name="keywords" content="психолог, психотерапия, депрессия, тревога, Алматы, онлайн">
  <meta property="og:title" content="Анна Лёвина">
  <meta property="og:description" content="Анна Лёвина — квалифицированная психологическая поддержка онлайн и в Алматы.">
  
  <link rel="icon" href="/favicon.ico">
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"/>
  <style>
    :root {
      --primary-color: #1f2937;
      --secondary-color: #fefdf9;
      --accent-color: rgb(43, 156, 153);
      --font-main: 'Montserrat', sans-serif;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    html {
  scroll-behavior: smooth;
}

    body {
      font-family: var(--font-main);
      background-color: var(--secondary-color);
      color: var(--primary-color);
      line-height: 1.6;
      scroll-behavior: smooth;
    }

    body::before {
      content: "";
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background: url('background.jpg') no-repeat center center;
      background-size: cover;
      opacity: 0.07;
      z-index: -1;
      pointer-events: none;
    }


    header {
      background: white;
      padding: 1rem;
      position: sticky;
      top: 0;
      box-shadow: 0 2px 4px rgba(0,0,0,0.05);
      z-index: 1000;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 1rem;
    }

    .navbar {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .logo {
      font-weight: 700;
      font-size: 1.5rem;
      color: var(--accent-color);
    }

    .menu {
      display: none;
      flex-direction: column;
      gap: 1rem;
      transition: all 0.3s ease;
    }

    .menu.active {
      display: flex;
    }

    .menu a {
      text-decoration: none;
      color: var(--primary-color);
      font-weight: 600;
    }

    .toggle {
      display: block;
      font-size: 1.5rem;
      cursor: pointer;
    }

    @media (min-width: 768px) {
      .menu {
        display: flex !important;
        flex-direction: row;
      }
      .toggle {
        display: none;
      }
    }

    .hero {
      background: linear-gradient(to right, rgba(212, 244, 244, 0.5), rgba(235, 251, 251, 0.5));
      padding: 5rem 1rem;
      display: flex;
      flex-direction: column-reverse;
      align-items: center;
      animation: fadeIn 1s ease-in;
    }

    .hero .container {
      display: flex;
      flex-direction: column-reverse;
      align-items: center;
      gap: 2rem;
    }

    .hero-text-block {
      text-align: center;
      max-width: 600px;
    }

    .hero-text-block h1 {
  font-size: clamp(2rem, 5vw, 3.2rem);
  color: var(--accent-color);
  margin-bottom: 0.5rem;
}

.hero-text-block .subtitle {
  font-size: 1.2rem;
  font-weight: 500;
  color: #555;
  margin-bottom: 2rem;
}

.hero-paragraphs p {
  margin-bottom: 1rem;
  font-size: 1.05rem;
}

.hero-paragraphs blockquote {
  font-style: italic;
  background: rgba(43, 156, 153, 0.05);
  padding: 1rem;
  border-left: 4px solid var(--accent-color);
  margin: 1rem 0;
  border-radius: 8px;
}

    .hero h1 {
      font-size: clamp(1.8rem, 5vw, 3rem);
      margin-bottom: 1rem;
      font-weight: 700;
    }

    .cta-button {
      background-color: var(--accent-color);
      color: white;
      padding: 0.8rem 1.5rem;
      border: none;
      border-radius: 8px;
      font-weight: 600;
      font-size: 1rem;
      text-decoration: none;
      transition: background 0.3s ease;
      display: inline-block;
      margin-top: 1rem;
    }

    .cta-button:hover {
      background-color: rgb(38, 139, 136);
    }

    .hero img {
      max-width: 100%;
      border-radius: 16px;
      box-shadow: 0 8px 24px rgba(0,0,0,0.1);
      /* Default styles for desktop */
      object-fit: cover;
      object-position: center top;
      height: auto;
      aspect-ratio: unset;
    }

    @media (max-width: 767px) {
      .hero {
        padding-top: 8rem;
        padding-bottom: 1rem;
      }

      .hero img {
        width: 33%;
        max-width: 100px;
        aspect-ratio: 1 / 1;
        height: auto;
        object-fit: cover;
        object-position: center top;
        display: block;
        margin: 0 auto;
        transform: scale(3);
        transform-origin: center center;
        border-radius: 32% 38% 36% 32%/38% 32% 38% 32%;
        margin-bottom: 25%;
        box-shadow:
          0 8px 32px 0 rgba(43,156,153,0.18),
          0 1.5px 8px 0 rgba(0,0,0,0.10),
          0 0 32px 8px rgba(43,156,153,0.13),
          0 0 0 8px rgba(255,255,255,0.10) inset;
        border: 3px solid transparent;
        position: relative;
        z-index: 1;
        background: linear-gradient(135deg, rgba(43,156,153,0.08) 0%, rgba(255,255,255,0.12) 100%);
      }
      .hero img::before {
        content: '';
        position: absolute;
        inset: -7px;
        border-radius: 36% 42% 40% 36%/42% 36% 42% 36%;
        padding: 0;
        z-index: 2;
        background: linear-gradient(120deg, rgba(43,156,153,0.25) 0%, rgba(255,255,255,0.18) 100%);
        border: 2.5px solid;
        border-image: linear-gradient(120deg, #2b9c99 30%, #fff 70%) 1;
        pointer-events: none;
        animation: borderGlow 3.5s linear infinite;
      }
      .hero img::after {
        content: '';
        position: absolute;
        left: 18%;
        top: 12%;
        width: 32%;
        height: 18%;
        background: linear-gradient(120deg, rgba(255,255,255,0.7) 0%, rgba(255,255,255,0.0) 100%);
        border-radius: 50%;
        filter: blur(2px);
        opacity: 0.7;
        pointer-events: none;
        z-index: 3;
        animation: sparkle 2.5s ease-in-out infinite alternate;
      }
      section.visible {
        padding-top: 1rem;
        padding-bottom: 0rem;
      }
    }

    @media (min-width: 768px) {
      .hero .container {
        flex-direction: row;
        justify-content: space-between;
      }
      .hero-text-block {
        text-align: left;
      }
      .hero img {
        max-width: 400px;
      }
    }

    .section {
      padding: 2rem 1rem;
      opacity: 0;
      transform: translateY(40px);
      transition: all 0.6s ease-out;
    }

    .section.visible {
      opacity: 1;
      transform: translateY(0);
    }

    .grid {
      display: grid;
      gap: 2rem;
    }

    @media (min-width: 768px) {
      .grid-2 {
        grid-template-columns: 1fr 1fr;
      }
    }

    .card {
      background: white;
      border-radius: 12px;
      padding: 2rem;
      box-shadow: 0 4px 16px rgba(0,0,0,0.06);
      transition: transform 0.3s;
      border: 1px solid rgba(43, 156, 153, 0.15);
    }

    .card:hover {
      transform: translateY(-4px);
    }

    .card.service-card {
      border-top: 4px solid var(--accent-color);
      text-align: center;
    }
    .card.service-card i {
      font-size: 2rem;
      color: var(--accent-color);
      margin-bottom: 0.5rem;
    }

    .about-image {
      width: 100%;
      border-radius: 12px;
      margin-top: 1rem;
    }

    .about-panel {
      background-color: rgba(43, 156, 153, 0.05);
      border-left: 4px solid var(--accent-color);
      padding: 1.5rem;
      border-radius: 12px;
      margin-bottom: 1.5rem;
    }


    footer {
      text-align: center;
      padding: 1.5rem;
      background-color: rgba(43, 156, 153, 0.05);
      color: rgb(43, 156, 153);
      font-size: 0.9rem;
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .section-title {
      text-align: center;
      font-size: clamp(1.8rem, 4vw, 2.5rem);
      font-weight: 700;
      color: var(--primary-color);
      margin-bottom: 1rem;
      position: relative;
    }

    .section-title::after {
      content: "";
      display: block;
      width: 60px;
      height: 4px;
      margin: 0.5rem auto 0;
      background: var(--accent-color);
      border-radius: 2px;
      opacity: 0.9;
      animation: growBar 1s ease;
    }

    @keyframes growBar {
      from {
        width: 0;
        opacity: 0;
      }
      to {
        width: 60px;
        opacity: 1;
      }
    }
  
.cert-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 1rem;
}

.cert-grid img {
  width: 100%;
  border-radius: 12px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.1);
  cursor: pointer;
  transition: transform 0.3s;
}

.cert-grid img:hover {
  transform: scale(1.03);
}

@media (min-width: 768px) {
  .cert-grid {
    grid-template-columns: repeat(4, 1fr);
  }
}

.lightbox {
  display: none;
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.8);
  justify-content: center;
  align-items: center;
  z-index: 2000;
}

.lightbox img {
  max-width: 90%;
  max-height: 80vh;
  border-radius: 12px;
}

.lightbox .nav {
  position: absolute;
  top: 50%;
  font-size: 2rem;
  color: white;
  cursor: pointer;
  user-select: none;
  padding: 0 1rem;
  transform: translateY(-50%);
}

.lightbox .prev {
  left: 20px;
}

.lightbox .next {
  right: 20px;
}

.fancy-service {
  position: relative;
  background: white;
  border: 2px solid transparent;
  background-clip: padding-box;
  border-radius: 16px;
  padding: 2rem;
  text-align: center;
  transition: transform 0.3s, box-shadow 0.3s;
  box-shadow: 0 4px 16px rgba(0,0,0,0.05);
}

.fancy-service:hover {
  transform: translateY(-6px);
  box-shadow: 0 12px 24px rgba(0,0,0,0.08);
}

.fancy-service i {
  font-size: 2.5rem;
  color: var(--accent-color);
  margin-bottom: 1rem;
  transition: transform 0.3s ease;
}

.fancy-service:hover i {
  transform: scale(1.15);
}

.fancy-service h3 {
  font-size: 1.25rem;
  font-weight: 600;
  margin-bottom: 0.5rem;
  color: var(--primary-color);
}

.announcement-bar {
  background-color: #fff8dc;
  border-bottom: 1px solid rgba(43, 156, 153, 0.2);
  padding: 0.6rem 1rem;
  position: sticky;
  top: 0;
  z-index: 1100;
  box-shadow: 0 2px 6px rgba(0,0,0,0.05);
}

.announcement-content {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 1rem;
  flex-wrap: wrap;
  text-align: center;
}

.announcement-text {
  font-size: 1rem;
  font-weight: 600;
  color: var(--primary-color);
}

.announcement-btn {
  background-color: var(--accent-color);
  color: white;
  padding: 0.4rem 1rem;
  border-radius: 999px;
  font-size: 0.9rem;
  font-weight: 600;
  text-decoration: none;
  transition: background 0.3s ease;
}

.announcement-btn:hover {
  background-color: rgb(38, 139, 136);
}

.service-modal-overlay {
  display: none;
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.6);
  justify-content: center;
  align-items: center;
  z-index: 3000;
}

.service-modal {
  background: white;
  padding: 2rem;
  max-width: 600px;
  width: 90%;
  border-radius: 12px;
  box-shadow: 0 12px 28px rgba(0,0,0,0.25);
  position: relative;
  animation: fadeInScale 0.3s ease;
  text-align: left;
  max-height: 80vh;
  overflow-y: scroll;
  -webkit-overflow-scrolling: touch;
}

.service-modal::-webkit-scrollbar {
  width: 8px;
  background: #f0f0f0;
  border-radius: 8px;
}

.service-modal::-webkit-scrollbar-thumb {
  background: var(--accent-color);
  border-radius: 8px;
}

.service-modal h3 {
  margin-top: 0;
  color: var(--accent-color);
}

.service-modal p {
  margin: 1rem 0;
  line-height: 1.5;
}

.service-modal .close-btn {
  position: absolute;
  top: 12px;
  right: 16px;
  font-size: 1.5rem;
  cursor: pointer;
  color: #999;
}

@keyframes fadeInScale {
  from {
    opacity: 0;
    transform: scale(0.9);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

.service-details-link, .contact-link {
      color: var(--accent-color);
      font-weight: 600;
      text-decoration: underline;
      margin-top: 0.5rem;
      display: inline-block;
      transition: color 0.2s;
    }
    .service-details-link:hover, .contact-link:hover {
      color: rgb(38, 139, 136);
    }

    @keyframes heroFloat {
        0% { transform: scale(3) rotate(-6deg) translateY(0); }
        100% { transform: scale(3) rotate(-6deg) translateY(-22px); }
      }
      @keyframes heroTilt {
        0% { filter: brightness(1) drop-shadow(0 0 0 #fff); }
        50% { filter: brightness(1.08) drop-shadow(0 0 8px #2b9c99cc); }
        100% { filter: brightness(1) drop-shadow(0 0 0 #fff); }
      }
      @keyframes borderGlow {
        0% { filter: drop-shadow(0 0 0px #2b9c99); }
        50% { filter: drop-shadow(0 0 8px #2b9c99); }
        100% { filter: drop-shadow(0 0 0px #2b9c99); }
      }
      @keyframes sparkle {
        0% { opacity: 0.7; left: 18%; top: 12%; }
        100% { opacity: 1; left: 28%; top: 18%; }
      }
</style>

</style>
</head>
<body>
  <header>
    <div class="container navbar">
      <div class="logo">Анна Лёвина</div>
      <div class="toggle" onclick="toggleMenu()">☰</div>
      <nav class="menu" id="mainMenu">
        <a href="#about">Обо мне</a>
        <a href="#services">Услуги</a>
        <a href="#contact">Контакты</a>
      </nav>
    </div>

    <div class="announcement-bar">
      <div class="container announcement-content">
        <!-- <span class="announcement-text"></span> -->
        <a href="#contact" class="announcement-btn">🎲 Игра Лила – 25 июля</a>
      </div>
    </div>
    
  </header>

  <section class="hero">
    <div class="container">
      <div class="hero-text-block">
        <!-- <h1>Время услышать себя</h1> -->
        <!-- <p class="subtitle">Если вы здесь — возможно, настал момент что-то изменить</p> -->
      
        <div class="hero-paragraphs">
          <p>Я верю в то, что случайности не случайны. Если Вы оказались на этой страничке, возможно, что-то внутри больше не даёт жить по-прежнему. В какой-то момент приходит осознание: так больше нельзя — жить на автомате, вывозить, делать вид, держаться — впишите своё. </p>
          <blockquote>«Я не знаю, с чем именно вы пришли. Но знаю — каждый человек — это отдельный мир.»</blockquote>
          <p>Что у меня точно есть — это огромный интерес к каждому человеку, определенные знания и собственный опыт. Я верю, что в точке настоящего человеческого контакта рождается нечто большее, чем просто диалог — это и есть психотерапевтическая алхимия. Если Вам важно разобраться в себе, почувствовать, дойти до сути — здесь есть место для этого пути.</p>
        </div>
      
        <a href="#contact" class="cta-button">Записаться на встречу</a>
      </div>
      
      
      <img src="anya-main.jpg"> </img>
    </div>
    
  </section>

  <section class="section" id="about">
    <div class="container">
      <div style="text-align: center; font-size: 2rem; color: var(--accent-color);">
        <i class="fas fa-user-circle"></i>
      </div>
      <h2 class="section-title">Обо мне</h2>
      
      <div class="grid grid-2">
        <div class="about-panel">
          <h3>Мой путь</h3>
          <p>Я — Анна. Будучи подростком, хотела стать судебным психологом, насмотревшись сериала Галифакс. Жизнь сложилась иначе. По первому образованию я — экономист-международник, много лет посвятила бизнесу и уже во взрослой жизни получила MBA в МГУ. Учиться в МГУ было голубой мечтой юности. Мой путь в психологию начался с личной терапии более 10 лет назад — за это время случилось много интересного. Экзистенциальный кризис середины жизни накрыл как следует и без предупреждения. Всё это привело to тому, что в какой-то момент я решила изменить привычную жизнь — прошла переподготовку по основам психологической науки и практики, ушла из бизнеса, начала работать с людьми и окончила магистратуру по клинической психологии. Теперь я психолог — не тот, из сериала, а тот, кем смогла стать. Добро пожаловать на мою страницу. Будем знакомы.</p>
        </div>
  
        
        <div class="about-panel">
          <h3>Границы моего профессионального поля</h3>
          <p>Я не работаю с детьми, подростками, семьями. <br>
            Также не сопровождаю случаи, связанные с зависимостью от психоактивных веществ, расстройствами пищевого поведения, психотическими состояниями, тяжёлыми формами пограничного расстройства, выраженными суицидальными рисками и нарушениями нейроразвития.
            </p>
        </div>

        <div class="about-panel">
          <h3>С чем люблю работать</h3>
          <p>Мне особенно близки темы поиска смысла, самоопределения, внутренней опоры; экзистенциальных кризисов, духовных переживаний, внутренних трансформаций — когда привычные опоры рушатся, а новые ещё не простроены. При этом совершенно не обязательно приходить именно с этим. Зачастую человек приходит с тревогой, усталостью, тупиком в отношениях, внешним конфликтом, ощущением, что «что-то не так», а в итоге так или иначе оказывается на пути вглубь себя — того самого, настоящего, живого и иногда почти забытого. Путешествие к себе — одно из самых интересных, на мой взгляд, приключений в жизни.</p>
        </div>

  
        
  
        <div class="about-panel">
          <h3>Как я работаю</h3>
          <p>В своей работе я опираюсь на диалог, живое человеческое присутствие и исследование. Для меня важно не только «что» происходит, но и «как» — в теле, в чувствах, в мыслях. Я использую элементы из разных направлений: НЛП, экзистенциальный и психодинамический подход, символдрама. В моём понимании главное — не метод, а контакт. Всё, что происходит в процессе, рождается из доверия, внимания и совместного поиска. Моя задача — не помогать, не спасать, а быть рядом, чтобы вместе увидеть то, что одному бывает трудно разглядеть. Когда то, что спрятано внутри, становится ясным, прожитым и осознаваемым, оно перестаёт незримо управлять жизнью — в этот момент становится комфортнее внутри, свободнее снаружи и появляется возможность выбирать и действовать иначе.</p>
        </div>
      </div>
    </div>
  </section>

  <section class="section" id="services">
    <div class="container">
      <div style="text-align: center; font-size: 2rem; color: var(--accent-color);">
        <i class="fas fa-hands-helping"></i>
      </div>
      <h2 class="section-title">Услуги</h2>
      <div class="grid grid-2">

        <div class="card service-card fancy-service" onclick="openServiceModal(0)">
          <i class="fas fa-user-md"></i>
          <h3>Сессия</h3>
          <p>Терапевтическая работа с использованием психологических техник.</p>
        </div>

        <div class="card service-card fancy-service" onclick="openServiceModal(1)">
          <i class="fas fa-brain"></i>
          <h3>Разбор запроса по пирамиде логических уровней</h3>
          <p>Когнитивная техника, помогающая выявить ценности, установки и убеждения — и понять, как они влияют на Вашу жизнь. В процессе мы работаем с ограничивающими убеждениями, формируем новые и закрепляем их через самостоятельную практику.</p>
        </div>

        <div class="card service-card fancy-service" onclick="openServiceModal(2)">
          <i class="fas fa-dice-d20"></i>
          <h3>Трансформационная игра Лила</h3>
          <p>Психологическая настольная игра. Помогает осознать глубинные причины, прояснить внутренние процессы и найти новые смыслы.</p>
        </div>


      <div class="card service-card fancy-service" onclick="openServiceModal(3)">
        <i class="fas fa-chess"></i>
        <h3>Телесные шахматы</h3>
        <p>Психологическая практика, в которой человек при помощи других участников разыгрывает свою жизненную ситуацию. Становятся видимыми скрытые роли, внутренние конфликты и стратегии поведения. Практика помогает осознать, что на самом деле происходит внутри, и найти новый способ действовать.</p>
      </div>

    </div>
    </div>
  </section>
  

  
  
  <section class="section" id="certificates">
    <div class="container">
      <!-- <h2 class="section-title">Сертификаты</h2> -->
      <div class="cert-grid">
        <img src="diploma_thumb1.jpg" onclick="openLightbox(0)">
        <img src="diploma_thumb2.jpg" onclick="openLightbox(1)">
        <img src="diploma_thumb3.jpg" onclick="openLightbox(2)">
        <img src="diploma_thumb4.jpg" onclick="openLightbox(3)">
      </div>
    </div>
  </section>


  <section class="section" id="contact">
    <div class="container">
      <div style="text-align: center; font-size: 2rem; color: var(--accent-color); margin-bottom: 0.5rem;">
        <i class="fas fa-envelope-open-text"></i>
      </div>
      <h2 class="section-title">Контакты</h2>
      <p style="margin-top: 2rem; text-align: center;">
        Напишите мне, если у Вас есть вопросы или Вы хотите назначить первую встречу.
      </p>

      <div class="grid grid-2" style="margin-top: 2rem;">
        <div class="card" style="text-align: center;">
          <i class="fas fa-file-contract" style="font-size: 2rem; color: #0088cc;"></i>
          <p><strong>Информированное согласие </strong></p>
          <p><a href="#" onclick="openConsentModal(); return false;" class="contact-link">Ознакомиться</a></p>
        </div>

        <div class="card" style="text-align: center;">
          <i class="fab fa-whatsapp" style="font-size: 2rem; color: #25D366;"></i>
          <p><strong>WhatsApp:</strong></p>
          <p><a href="https://wa.me/77772451227?text=Добрый день! Связываюсь с Вами через Ваш сайт." target="_blank" class="contact-link">+7 777 245 12 27</a></p>
        </div>

        
      </div>
      
    </div>
  </section>

  
  

  <div id="lightbox" class="lightbox" onclick="closeLightbox()">
    <img id="lightbox-img" src="" alt="Certificate">
    <div class="nav prev" onclick="navigate(-1)">❮</div>
    <div class="nav next" onclick="navigate(1)">❯</div>
  </div>

<footer>
    &copy; Анна Лёвина <p><a href="#" onclick="openConsentModal(); return false;" class="contact-link">Информированное согласие</a></p>
  </footer>

  <script>
    function toggleMenu() {
      document.getElementById('mainMenu').classList.toggle('active');
    }

    const sections = document.querySelectorAll('.section');
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.classList.add('visible');
        }
      });
    }, { threshold: 0.001 });

    sections.forEach(section => {
      observer.observe(section);
    });
  
const certImages = [
  "diploma1.jpg",
  "diploma2.jpg",
  "diploma3.jpg",
  "diploma4.jpg"
];

let currentCertIndex = 0;

function openLightbox(index) {
  currentCertIndex = index;
  document.getElementById('lightbox-img').src = certImages[index];
  document.getElementById('lightbox').style.display = 'flex';
  // Add keyboard event listener for navigation
  document.addEventListener('keydown', lightboxKeyHandler);
}

function closeLightbox() {
  document.getElementById('lightbox').style.display = 'none';
  // Remove keyboard event listener when closing
  document.removeEventListener('keydown', lightboxKeyHandler);
}

function navigate(offset) {
  event.stopPropagation();
  currentCertIndex = (currentCertIndex + offset + certImages.length) % certImages.length;
  document.getElementById('lightbox-img').src = certImages[currentCertIndex];
}

function lightboxKeyHandler(e) {
  if (document.getElementById('lightbox').style.display !== 'flex') return;
  if (e.key === 'ArrowLeft') {
    navigate(-1);
    e.preventDefault();
  } else if (e.key === 'ArrowRight') {
    navigate(1);
    e.preventDefault();
  } else if (e.key === 'Escape') {
    closeLightbox();
    e.preventDefault();
  }
}

</script>

<!-- Service Modals -->
<div id="serviceModalOverlay" class="service-modal-overlay" onclick="closeServiceModal()">
  <div class="service-modal" onclick="event.stopPropagation()">
    <span class="close-btn" onclick="closeServiceModal()">×</span>
    <div id="serviceModalContent"></div>
  </div>
</div>

<!-- Consent Modal -->
<div id="consentModalOverlay" class="service-modal-overlay" onclick="closeConsentModal()">
  <div class="service-modal" onclick="event.stopPropagation()">
    <span class="close-btn" onclick="closeConsentModal()">×</span>
    <div id="consentModalContent"></div>
  </div>
</div>

<script>
    function openConsentModal() {
  // Retrieve previous values from window-scoped variables or set defaults
  const prevName = window._consentNameValue || '';
  const prevSurname = window._consentSurnameValue || '';
  const prevPatronymic = window._consentPatronymicValue || '';
  const prevChecked = window._consentCheckboxChecked || false;

  const consentContent = document.getElementById('consentModalContent');
  consentContent.innerHTML = `
    <h3>Информированное согласие</h3>
    <p>
    <strong>1.&nbsp;&nbsp;&nbsp;&nbsp;Характер работы</strong><br>Психологическая консультация не является медицинской или психиатрической помощью. Я не ставлю диагнозов и не назначаю медикаментозного лечения. Моя работа — это сопровождение, исследование внутренних процессов и поддержка в поиске смысла, ясности и новых стратегий поведения.<br><br>
    <strong>2.&nbsp;&nbsp;&nbsp;&nbsp;Ощущения в процессе</strong><br>Психологическая работа может вызывать разные переживания — облегчение, тревогу, раздражение, сомнение, усталость, внутренние открытия. Это естественно, особенно если затрагиваются глубинные темы. Всё это — часть живого процесса изменений.<br><br>
    <strong>3.&nbsp;&nbsp;&nbsp;&nbsp;Ответственность</strong><br>Каждый человек сам несёт ответственность за свою жизнь, принятые решения и поступки. Моя задача — быть рядом, чтобы вместе прояснять и осознавать, а не давать советы или готовые решения.<br><br>
    <strong>4.&nbsp;&nbsp;&nbsp;&nbsp;Конфиденциальность</strong><br>Всё, что происходит в процессе работы, остаётся конфиденциальным. Исключение — ситуации, когда есть прямая угроза жизни или здоровью — Вашему или других людей. В таких случаях я обязана действовать в рамках закона.<br><br>
    <strong>5.&nbsp;&nbsp;&nbsp;&nbsp;Условия для индивидуальных форматов</strong><br>
    <br>5.1.&nbsp;&nbsp;&nbsp;&nbsp;Сессия бронируется по предварительной записи.
    <br>5.2.&nbsp;&nbsp;&nbsp;&nbsp;Оплата производится в течение 12 часов после встречи. В случае систематического несоблюдения этого условия может быть введена предоплата.
    <br>5.3.&nbsp;&nbsp;&nbsp;&nbsp;Если Вам нужно отменить или перенести встречу, пожалуйста, предупредите не менее чем за 24 часа. При неоднократном несоблюдении данного условия может быть введена невозвратная предоплата.
    <br>5.4.&nbsp;&nbsp;&nbsp;&nbsp;Если я отменяю или переношу встречу и не предупреждаю об этом за 24 часа, за Вами сохраняется право на бесплатную сессию.
    <br>5.5.&nbsp;&nbsp;&nbsp;&nbsp;Эти правила — про взаимное уважение к нашему времени и совместной работе.
    <br><br>
    <strong>6.&nbsp;&nbsp;&nbsp;&nbsp;Условия для групповых форматов</strong><br>Для участия в трансформационных играх и групповых практиках предусмотрена предварительная регистрация и предоплата. В случае отмены участия менее чем за 24 часа предоплата не возвращается.<br><br>
    <strong>7.&nbsp;&nbsp;&nbsp;&nbsp;Согласие с условиями</strong><br>Записываясь на индивидуальную или групповую работу, Вы подтверждаете, что ознакомлены с этими условиями и согласны с ними.<br><br>
    Если у Вас есть вопросы по условиям работы, пожалуйста, задайте их до начала консультаций.</p>
    <form id="consentForm" autocomplete="off" style="margin-top: 1.5rem; text-align: center;">
      <div style="display: flex; flex-direction: column; gap: 0.7rem; align-items: center;">
        <input type="text" id="consentName" placeholder="Имя" value="${prevName.replace(/"/g, '&quot;')}" style="width: 80%; max-width: 320px; padding: 0.5em; border-radius: 6px; border: 1px solid #ccc; font-size: 1rem;">
        <input type="text" id="consentSurname" placeholder="Фамилия" value="${prevSurname.replace(/"/g, '&quot;')}" style="width: 80%; max-width: 320px; padding: 0.5em; border-radius: 6px; border: 1px solid #ccc; font-size: 1rem;">
        <input type="text" id="consentPatronymic" placeholder="Отчество" value="${prevPatronymic.replace(/"/g, '&quot;')}" style="width: 80%; max-width: 320px; padding: 0.5em; border-radius: 6px; border: 1px solid #ccc; font-size: 1rem;">
      </div>
      <div style="margin-top: 1.2rem;">
        <label id="consentCheckboxLabel" style="display: inline-flex; align-items: center; gap: 0.5rem; cursor: pointer;">
          <input type="checkbox" id="consentCheckbox" style="width: 1.2em; height: 1.2em; accent-color: var(--accent-color);" ${prevChecked ? 'checked' : ''}>
          <span>Я ознакомлен(а) и понимаю</span>
        </label>
      </div>
      <button type="button" id="consentProceedBtn" class="announcement-btn" style="font-size: 1.1rem; padding: 0.5rem 2rem; margin-top: 1.2rem;">Продолжить</button>
    </form>
  `;
  document.getElementById('consentModalOverlay').style.display = 'flex';
  setTimeout(() => {
    const btn = document.getElementById('consentProceedBtn');
    const checkbox = document.getElementById('consentCheckbox');
    const label = document.getElementById('consentCheckboxLabel');
    const nameInput = document.getElementById('consentName');
    const surnameInput = document.getElementById('consentSurname');
    const patronymicInput = document.getElementById('consentPatronymic');
    if (btn && checkbox && label && nameInput && surnameInput && patronymicInput) {
      // Save values on input/change
      nameInput.addEventListener('input', () => { window._consentNameValue = nameInput.value; });
      surnameInput.addEventListener('input', () => { window._consentSurnameValue = surnameInput.value; });
      patronymicInput.addEventListener('input', () => { window._consentPatronymicValue = patronymicInput.value; });
      checkbox.addEventListener('change', () => { window._consentCheckboxChecked = checkbox.checked; });
      // Button click logic
      btn.onclick = function() {
        let valid = true;
        if (!checkbox.checked) {
          label.animate([
            { boxShadow: '0 0 0 0px red', borderColor: 'red' },
            { boxShadow: '0 0 0 4px red', borderColor: 'red' },
            { boxShadow: '0 0 0 0px red', borderColor: 'red' }
          ], {
            duration: 600,
            iterations: 1
          });
          valid = false;
        }
        [nameInput, surnameInput, patronymicInput].forEach(input => {
          if (!input.value.trim()) {
            input.animate([
              { boxShadow: '0 0 0 0px red', borderColor: 'red' },
              { boxShadow: '0 0 0 4px red', borderColor: 'red' },
              { boxShadow: '0 0 0 0px red', borderColor: 'red' }
            ], {
              duration: 600,
              iterations: 1
            });
            valid = false;
          }
        });
        if (valid) {
          closeConsentModal();
        }
      };
    }
  }, 0);
}

function closeConsentModal() {
  // Save current values before closing
  const nameInput = document.getElementById('consentName');
  const surnameInput = document.getElementById('consentSurname');
  const patronymicInput = document.getElementById('consentPatronymic');
  const checkbox = document.getElementById('consentCheckbox');
  if (nameInput) window._consentNameValue = nameInput.value;
  if (surnameInput) window._consentSurnameValue = surnameInput.value;
  if (patronymicInput) window._consentPatronymicValue = patronymicInput.value;
  if (checkbox) window._consentCheckboxChecked = checkbox.checked;
  document.getElementById('consentModalOverlay').style.display = 'none';
}

const services = [
  {
    title: "Сессия",
    icon: "fas fa-user-md",
    description: "Терапевтическая работа с использованием психологических техник.",
    format: "Онлайн, регулярные встречи один раз в неделю. Продолжительность зависит от запроса: до достижения желаемого результата или по договорённости.",
    duration: "45-60 минут.",
    price: "25 000 ₸"
  },
  {
    title: "Разбор запроса по пирамиде логических уровней",
    icon: "fas fa-brain",
    description: "Когнитивная техника, помогающая выявить ценности, установки и убеждения — и понять, как они влияют на Вашу жизнь. В процессе мы работаем с ограничивающими убеждениями, формируем новые и закрепляем их через самостоятельную практику.",
    format: "Онлайн, разовая сессия по конкретному запросу.",
    duration: "1,5-2 часа.",
    price: "45 000 ₸"
  },
  {
    title: "Трансформационная игра Лила",
    icon: "fas fa-dice-d20",
    description: "Психологическая настольная игра. Помогает осознать глубинные причины, прояснить внутренние процессы и найти новые смыслы.",
    format: "Офлайн, индивидуально или в группе (2-5 человек).",
    duration: "1-5 часов.",
    price: "50 000 ₸ — индивидуальная. <br> 40 000 ₸ / чел. — групповая. <br> Предоплата 50%."
  },
  {
    title: "Телесные шахматы",
    icon: "fas fa-chess",
    description: "Психологическая практика, в которой человек при помощи других участников разыгрывает свою жизненную ситуацию. Становятся видимыми скрытые роли, внутренние конфликты и стратегии поведения. Практика помогает осознать, что на самом деле происходит внутри, и найти новый способ действовать.",
    format: "Офлайн, в группе (5-6 человек).",
    duration: "6-8 часов.",
    price: "25 000 ₸ / чел. <br> Предоплата 50%."
  }
];

// Dynamically fill service cards from the services array
window.addEventListener('DOMContentLoaded', function() {
  const serviceCards = document.querySelectorAll('.card.service-card.fancy-service');
  serviceCards.forEach((card, i) => {
    if (services[i]) {
      card.innerHTML = `
        <i class="${services[i].icon}"></i>
        <h3>${services[i].title}</h3>
        <p>${services[i].description}</p>
        <a href="#" class="service-details-link" style="color: var(--accent-color); font-weight: 600; text-decoration: underline; margin-top: 0.5rem; display: inline-block;" onclick="event.preventDefault(); openServiceModal(${i});">Узнать больше</a>
      `;
    }
  });
});

function openServiceModal(index) {
  const modalContent = document.getElementById('serviceModalContent');
  modalContent.innerHTML = `
    <h3><i class="${services[index].icon}" style="margin-right: 0.5rem;"></i>${services[index].title}</h3>
    <p>${services[index].description}</p>
     <h3>Формат</h3>
     <p>${services[index].format}</p>
     <h3>Длительность</h3>
     <p>${services[index].duration}</p>
     <h3>Стоимость, тенге</h3>
     <p>${services[index].price}</p>
     <div style="text-align: center; margin-top: 1.5rem;">
       <a href="#contact" class="announcement-btn" style="font-size: 1.2rem; padding: 0.6rem 2rem;" onclick="closeServiceModal()">Запись</a>
     </div>
  `;
  document.getElementById('serviceModalOverlay').style.display = 'flex';
}

function closeServiceModal() {
  document.getElementById('serviceModalOverlay').style.display = 'none';
}
</script>

</body>
</html>
